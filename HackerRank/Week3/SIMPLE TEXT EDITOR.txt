SIMPLE TEXT EDITOR



#include <stdio.h>
#include <string.h>
#include <math.h>
#include <stdlib.h>
#define MAX_LEN 1000000
char *history[100000];
int top = -1;
void push(const char *s){
    history[++top] = strdup(s);
}
char* pop(){
    if(top < 0) return NULL;
    return history[top--];
}

int main() {
    int Q;
    scanf("%d", &Q);
    char S[MAX_LEN + 1];
    S[0] = '\0';
    push(S);
    for(int i = 0; i < Q; i++){
        int type;
        scanf("%d", &type);
        if(type == 1){
            char w[MAX_LEN + 1];
            scanf("%s", w);
            strcat(S, w);
            push(S);
            
        }else if(type == 2){
            int k;
            scanf("%d", &k);
            int len = strlen(S);
            S[len - k] = '\0';
            push(S);
            
        }else if(type == 3){
        int k; 
        scanf("%d", &k);
        printf("%c\n", S[k - 1]);
           
        }else if(type == 4){
        free(pop());
        strcpy(S, history[top]);
        
      }
    }
    while(top >= 0) free(history[top--]);   
    return 0;
}
